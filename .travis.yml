# Install the apt prerequisites
addons:
  snap:
    - hugo

# Clean and don't fail
install:
  - rm -rf public || exit 0

# Build the website
script:
  - git submodule init
  - git submodule update themes/devfest-theme-hugo
  - hugo --theme=devfest-theme-hugo

# Deploy to GitHub pages
deploy:
  if: fork = false AND branch = master
  provider: pages
  skip_cleanup: true
  repo: futminna-dev-circle/futminna-dev-circle.github.io
  target_branch: master
  github_token: $GITHUB_TOKEN
  local_dir: public
